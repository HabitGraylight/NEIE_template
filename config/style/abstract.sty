\ProvidesPackage{abstract}[2025/03/26 Abstract formatting for Chongqing University]

%  fancyhdr 宏包用于页眉页脚设置
\RequirePackage{fancyhdr}
\RequirePackage{titlesec}

\fancypagestyle{abstractstylecn}{
  \fancyhf{}
  \fancyhead[LO]{\footnotesize 重庆大学本科生毕业论文（设计）} 
  \fancyhead[RE]{\footnotesize 摘要} 
  \fancyhead[RO]{\footnotesize 摘要} 
  \fancyhead[LE]{\footnotesize 重庆大学本科生毕业论文（设计）} 
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0pt}
  
  % 字号适配
  \fancyheadoffset[L]{0.5em} % 左侧缩进补偿
  \fancyheadoffset[R]{0.5em} % 右侧缩进补偿
}%这里是设置摘要页面样式

\fancypagestyle{abstractstyleen}{
  \fancyhf{}
  \fancyhead[LO]{\footnotesize 重庆大学本科生毕业论文（设计）} % 偶数页页眉左侧
  \fancyhead[RE]{\footnotesize\setmainfont{Times New Roman} ABSTRACT} % 偶数页页眉右侧
  \fancyhead[RO]{\footnotesize\setmainfont{Times New Roman} ABSTRACT} % 奇数页页眉右侧
  \fancyhead[LE]{\footnotesize 重庆大学本科生毕业论文（设计）} % 奇数页页眉左侧
  \fancyfoot[C]{\footnotesize \thepage}
  \renewcommand{\headrulewidth}{0.4pt}%页眉的那根线
  \renewcommand{\footrulewidth}{0pt}%页脚不要线
  
  % 字号适配
  \fancyheadoffset[L]{0.5em} % 左侧缩进补偿
  \fancyheadoffset[R]{0.5em} % 右侧缩进补偿
}


% 中文摘要环境修正
\newenvironment{cquabstract}[1]{
  \clearpage
  \pagestyle{abstractstyleen}
  \thispagestyle{abstractstylecn} % 有时候会出bug, 但是改起来很麻烦,(shi山代码就是这么来的)
  \setcounter{page}{1} % 页码初始化
  \pagenumbering{Roman} % 大写罗马数字
  \begin{center}
    \vspace*{1cm} % 垂直定位补偿
    {\bfseries\zihao{3} 摘\quad 要}
    \vspace{20pt} % 精确行距
  \end{center}
  \setlength{\baselineskip}{20pt} % 固定行距为 20 磅
  \zihao{-4}
  \setlength{\parskip}{0pt} % 设置段间距为 0
  \setlength{\parindent}{2em} % 设置段首缩进
  #1
}{
  \vspace{\baselineskip} % 结束间距
}

% 关键词环境
\newenvironment{cqukeywords}{
  \par\vspace{1em} % 空一行
  {\bfseries\zihao{-4} 关键词：} % 黑体小四号
  \zihao{-4} % 小四号字体
}{
  \par % 结束
  \vspace*{\fill} % 填充剩余空间,删了应该也行
}

% 英文摘要同步修正
\newenvironment{cquabstracten}[1]{
  \clearpage
  \pagestyle{abstractstyleen}
  \thispagestyle{abstractstyleen}
  \begin{center}
    \vspace*{1cm}
    {\bfseries\zihao{3} ABSTRACT}
    \vspace{20pt}
  \end{center}
  \setlength{\baselineskip}{20pt} % 固定行距为 20 磅
  \zihao{-4}
  \setlength{\parskip}{0pt} % 设置段间距为 0
  \setlength{\parindent}{2em} % 设置段首缩进
  #1
}{
  \vspace{\baselineskip}
}

% 英文关键词环境
\newenvironment{cqukeywordsen}{
  \par\vspace{1em} % 空一行
  {\bfseries\zihao{-4} Keywords:} % 黑体小四号
  \zihao{-4} % 小四号字体
}{
  \par % 结束
  \vspace*{\fill} % 填充剩余空间
  % \newpage
}